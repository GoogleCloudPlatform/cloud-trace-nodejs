// This file contains valuable monkeypatches to Node core.

const ORIGINAL = Symbol();

function createPatchObject(patchedValue) {
  return {
    file: 'url',
    patch: (url) => {
      url.format = Object.assign(() => patchedValue, { [ORIGINAL]: url.format });
    },
    unpatch: (url) => {
      if (url.format[ORIGINAL]) {
        url.format = url.format[ORIGINAL];
      }
    }
  }
}

module.exports = [createPatchObject('unexpected-value')];
module.exports.default = [createPatchObject('expected-value')];
